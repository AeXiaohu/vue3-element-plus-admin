{"version":3,"sources":["webpack:///./src/components/FunctionComponent/MarkdownEditor.vue","webpack:///./src/components/FunctionComponent/MarkdownEditor.vue?c8fd","webpack:///./node_modules/vditor/dist/index.min.js"],"names":["key","Math","random","id","name","mounted","this","contentEditor","height","theme","mode","toolbarConfig","pin","cache","enable","preview","after","setValue","render","__scopeId","root","factory","module","exports","__webpack_modules__","694","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","Diff","op","text","prototype","diff_main","text1","text2","opt_checklines","opt_deadline","Number","MAX_VALUE","Date","getTime","deadline","Error","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","length","diffs","diff_compute_","unshift","push","diff_cleanupMerge","longtext","shorttext","i","indexOf","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","a","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","splice","subDiff","j","pop","text1_length","text2_length","max_d","ceil","v_offset","v_length","v1","Array","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","x1","y1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","undefined","String","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","data","replace","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","n","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","e","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","m","sign","toString","coords1","coords2","157","857","__unused_webpack_module","__webpack_exports__","__webpack_require__","abcRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","element","document","loadImg","it","testImage","createElement","src","getAttribute","addEventListener","naturalHeight","naturalWidth","querySelector","clientWidth","window","innerHeight","style","removeAttribute","querySelectorAll","forEach","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","target","mathRender","mediaRender","mermaidRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","anchorRender","type","anchor","classList","add","onclick","substr","top","getElementById","offsetTop","scrollTop","onhashchange","decodeURIComponent","location","hash","setLute","selection","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","playSVG","pauseSVG","speechDom","className","body","insertAdjacentElement","getVoice","currentVoice","defaultVoice","voices","getVoices","item","default","onvoiceschanged","voice_1","utterThis","voice","onend","cancel","innerHTML","speak","speaking","paused","resume","pause","Hc","vditorSpeechRange","getSelection","trim","display","event","getRangeAt","cloneRange","rect","getBoundingClientRect","left","screenX","setAttribute","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","apply","__generator","f","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","TypeError","call","mergeOptions","options","defaultOption","cdn","CDN","customEmoji","emojiPath","hljs","HLJS_OPTIONS","icon","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","speech","THEME_OPTIONS","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mark","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","_a","transform","Z","current","path","O","H","p","B","Q","Y","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","Vditor","previewImage","E","k","method","260","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","CODE_LANGUAGES","lineNumber","engine","macros","list","577","i18n","en_US","ja_JP","ko_KR","ru_RU","zh_CN","zh_TW","369","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_1__","abcElements","parentElement","contains","ABCJS","renderAbc","textContent","overflowX","726","echartsElements","innerText","option","JSON","parse","echarts","init","setOption","error","23","_i18n_index__WEBPACK_IMPORTED_MODULE_0__","_util_code160to32__WEBPACK_IMPORTED_MODULE_1__","index","maxHeight","codeText","codeElement","remove","divElement","copy","copied","textarea","before","outerHeight","383","flowchartElements","flowchartObj","flowchart","drawSVG","890","graphvizElements","blob","Blob","url","URL","webkitURL","blobUrl","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","console","93","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","includes","vditorHljsStyle","href","c","codes","block","highlightElement","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","map","lineHeight","insertAdjacentHTML","323","_util_code160to32__WEBPACK_IMPORTED_MODULE_3__","mathElements","defaultOptions","Object","assign","mathElement","katex","renderToString","displayMode","tagName","output","message","stopPropagation","preventDefault","vditorMathElement","currentTarget","closest","clipboardData","setData","chainAsync_1","fns","curr","last","fn","MathJax","loader","paths","mathjax","startup","typeset","tex","J","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","node","append","clear","updateDocument","errorTextElement","promise","chains","_loop_1","207","videoRender","audioRender","iframeRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","aElement","765","mermaidElements","config","altFontFamily","htmlLabels","useMaxWidth","fontFamily","gantt","leftPadding","rightPadding","securityLevel","sequence","boxMargin","diagramMarginX","diagramMarginY","startOnLoad","themeVariables","activationBkgColor","activationBorderColor","activeTaskBkgColor","activeTaskBorderColor","actorBkg","actorBorder","actorLineColor","actorTextColor","altBackground","altSectionBkgColor","arrowheadColor","background","border1","border2","classText","clusterBkg","clusterBorder","critBkgColor","critBorderColor","darkTextColor","defaultLinkColor","doneTaskBkgColor","doneTaskBorderColor","edgeLabelBackground","errorBkgColor","errorTextColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","fontSize","gridColor","labelBackground","labelBoxBkgColor","labelBoxBorderColor","labelColor","labelTextColor","lineColor","loopTextColor","mainBkg","mainContrastColor","nodeBkg","nodeBorder","noteBkgColor","noteBorderColor","noteTextColor","primaryBorderColor","primaryColor","primaryTextColor","secondBkg","secondaryBorderColor","secondaryColor","secondaryTextColor","sectionBkgColor","sectionBkgColor2","sequenceNumberColor","signalColor","signalTextColor","taskBkgColor","taskBorderColor","taskTextClickableColor","taskTextColor","taskTextDarkColor","taskTextLightColor","taskTextOutsideColor","tertiaryBorderColor","tertiaryColor","tertiaryTextColor","textColor","titleColor","todayLineColor","mermaid","initialize","894","mindmapElements","series","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","offset","position","lineStyle","width","roam","symbol","params","children","tooltip","trigger","triggerOn","198","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","vditor","tocHTML","ids","from","W","lastIndex","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbar","offsetHeight","scrollY","583","plantumlElements","plantumlEncoder","encode","792","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetImageLazyLoading","264","_i18n__WEBPACK_IMPORTED_MODULE_0__","oldImgElement","oldImgRect","spin","close","overflow","translate3d","innerWidth","setTimeout","scrollWidth","scrollHeight","clientHeight","btnElement","deg","968","codeTheme","958","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","228","addScriptSync","xhrObj","XMLHttpRequest","open","setRequestHeader","send","scriptElement","responseText","head","appendChild","async","onload","946","addStyle","styleElement","rel","getElementsByTagName","769","code160to32","931","isSafari","navigator","userAgent","isFirefox","toLowerCase","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","ctrlKey","updateHotkeyTip","hotkey","test","startsWith","isChrome","vendor","713","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","nodeName","S","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","attr","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","615","hasClosestByTag","hasClosestByHeadings","224","_i","arguments","merger","obj","prop","187","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","range","rangeCount","startContainer","focus","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","childNodes","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","end","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","stop","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","i7","insertNode","createTextNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","F9","pasteTemplate","content","cloneNode","__webpack_module_cache__","moduleId","cachedModule","definition","o","defineProperty","enumerable","get","templateObject_1","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","align","verticalAlign","orient","toolbox","bottom","emphasis","iconStyle","feature","restore","show","saveAsImage","right","resize","compatibility","removeCurrentToolbar","names","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","Le","log","print","processPasteCode","isCode","childElementCount","pres","code","processCodeRender","previewPanel","language","renderToc","outline","clickToc","keydownToc","im","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","input","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","markerElement","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","a1","blockquoteElement","O9","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","ib","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","yl","altKey","shiftKey","hotKeys","keyCode","hasShift","vU","nextIsNode","nodeValue","nextNode","parentNextNode","previousIsNode","expandMarker","nodeElement","JQ","nodeElementEnd","collapsed","processKeydown","composingLock","isComposing","undo","recordFirstPosition","zh","fixGSKeyBackspace","fixCJKPosition","fixHR","newlineElement","beforeMarkerElement","afterMarkerElement","pElement","fixMarkdown","fixList","fixBlockquote","preRenderElement","codeRenderElement","firstChild","fixCodeBlock","preBeforeElement","recentLanguage","cellElement","tableElement","isFirstCell","table2Element","isLastCell","fixTable","fixTask","fixTab","headingMarkerElement","process_processHeading","fixDelete","rangeStart","headingLength","fixFirefoxArrowUpTable","fixCursorDownInlineMath","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","processSpinVditorSVDOM","scrollCenter","processKeydown_processKeydown","_b","_c","_d","_e","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","setTheme","initUI","minHeight","upload","tip","export","setEditMode","afterRender","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","setProperty","initValue","pK","getItem","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","Gb","typeElement","quoteElement","strongElement","emElement","sElement","liElement","codeBlockElement","afterRenderEvent","afterRenderTimeoutId","counter","setItem","addToUndoStack","undoDelay","previoueIsEmptyA","nextIsCode","getNextHTML","getPreviousHTML","getRenderElementNextNode","blockCodeElement","splitElement","previousHTML","nextHTML","beforeHTML","afterHTML","modifyPre","find","cloneRangeOffset","parentNode","insertBefore","setHeading","removeHeading","showCode","first","previousElement","wysiwyg_processKeydown_processKeydown","blur","inputElemment","select","topBQElement","E2","pTempElement","linRefElement","inputElement","removeBlockElement","click","rangeStartOffset","nextElement","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","genUp","genDown","updateTable_1","oldRow","rows","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","l","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","ns","alignCenter","alignRight","insertRowElement","insertRowBelow","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","languageWrap","language_1","codeElement_1","onkeyup","matchLangData","selectionStart","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","downElement","down","nextInputElement","updateA","input2","link","tooltipText","genImagePopover","updateImg","alt","title","imageURL","elementEvent","altWrap","alternateText","titleWrap","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","lastBeforeHTML","lastAfterHTML","toolbarEvent","CustomEvent","useHighlight","useRender","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","MenuItem","menuItem","iconElement","tipPosition","process_processToolbar","processToolbar","__extends","extendStatics","b","setPrototypeOf","__proto__","__","constructor","create","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","dropEvent","dataTransfer","getData","types","paste","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","Ny","hotkeyEvent","extend","ctrlEnter","redo","esc","processHeading","repeat","sub","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","processPaste","Md2VditorSVDOM","spanNode","isPrevious","sideElement","SpinVditorSVDOM","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","headers","keys","Upload","isUploading","validateFile","files","hide","uploadFileList","errorTip","uploadingStr","iMax","file","validate","nameEmpty","size","over","fileExt","filename","accept","isAccept","some","fileTypeError","uploading","genUploadedLabel","response","msg","errFiles","uploadError","succFileText","succMap","uploadFiles","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","multiple","DataTransferItem","getAsFile","handler","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","status","success","format","onprogress","lengthComputable","progress","loaded","total","progressBar","input_input","previousAEmptyElement","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","__makeTemplateObject","cooked","raw","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","slice","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","reverse","columnCnt","rowCnt","currentColumn","textArray","endsWith","tab","pText","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","DX","theadHTML","tbodyElement","brElement","trElement","previousCellElement","codePosition","isEmpty","taskItemElement","checked","lastNode","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","callback","textHTML","textPlain","renderLinkDest","doc","items","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","DOMParser","parseFromString","$j","HTML2VditorIRDOM","oC","processHint","matchLangData_1","key_1","removeInline","aTextElement","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","delay","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","maxLength","preChar","IR","placeholder","bindEvent","linkElement","lastRect","getHTML","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","classes","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","parseFloat","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","tailHTML","emojiTail","download","downloadTip","exportMarkdown","exportPDF","generate","iframe","contentDocument","write","contentWindow","postMessage","exportHTML","Export_extends","Export","Fullscreen_extends","Fullscreen","zIndex","svgElement","fullscreen","Headings_extends","Headings","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","context","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","audioInput","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","set","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","state","renderDiff","hasUndo","G6","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","cloneElement","Options","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","wrap","startElement","endElement","Set","comments_1","difference","filter","has","oldIds","removedIds","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","nextRenderElement","src_extends","version","getOptions","_lutePath","contentThemePath","getValue","getCurrentMode","disabled","renderPreview","clearCache","removeItem","disabledCache","enableCache","html2md","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","destroy","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId"],"mappings":"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","file":"js/chunk-279e8e5b.6c9a6396.js","sourcesContent":["<template>\r\n<div>\r\n  <div :key=\"Math.random()\" id=\"vditor\"></div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vditor from 'vditor'\r\nimport \"vditor/src/assets/scss/index.scss\"\r\n\r\nexport default {\r\n  name: \"MarkdownEditor\",\r\n\r\n  mounted () {\r\n    this.contentEditor = new Vditor('vditor', {\r\n      height: 700,\r\n      theme: \"light\",\r\n      mode: \"sv\",\r\n      toolbarConfig: {\r\n        pin: true,\r\n      },\r\n      cache: {\r\n        enable: false,\r\n      },\r\n      preview: {\r\n        \"markdown\": {\r\n          \"paragraphBeginningSpace\": true\r\n        },\r\n        \"theme\": {\r\n          \"current\": \"light\"\r\n        }\r\n      },\r\n      after: () => {\r\n        this.contentEditor.setValue(`\r\n# vue3-element-plus-admin\r\n\r\n## 介绍\r\n\r\n基于vue3+element-plus的后台管理系统\r\n\r\n前后端分离：前端axios请求→后端node.js+express[, java springboot]查询mysql数据库→返回数据给前端页面展示\r\n\r\n依赖：typescript、sass、axios、echarts、element-plus、vue-ruoter、vuex、velocity-animate、aos animate...\r\n\r\n目前正在边学习边更新，也可以作为示例，作为简单参考\r\n\r\n[在线预览地址](https://aexiaohu.github.io/vue3-element-plus-admin/)\r\n\r\n\r\n## 项目安装\r\n\\`\\`\\`\r\nnpm install\r\n\\`\\`\\`\r\n\r\n### 编译开发\r\n\\`\\`\\`\r\nnpm run serve\r\n\\`\\`\\`\r\n\r\n### 编译生产\r\n\\`\\`\\`\r\nnpm run build\r\n\\`\\`\\`\r\n\r\n### Lints and fixes files\r\n\\`\\`\\`\r\nnpm run lint\r\n\\`\\`\\`\r\n\r\n### Vue CLI  自定义配置\r\nSee [Configuration Reference](https://cli.vuejs.org/config/).\r\n\r\n## 浏览器支持\r\n\r\n现代浏览器\r\n\r\n<figure>\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th style='text-align:center;'><img\r\n                        src=\"https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png\"\r\n                        referrerpolicy=\"no-referrer\"><br>Firefox</th>\r\n                <th style='text-align:center;'><img\r\n                        src=\"https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png\"\r\n                        referrerpolicy=\"no-referrer\"><br>Chrome</th>\r\n                <th style='text-align:center;'><img\r\n                        src=\"https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png\"\r\n                        referrerpolicy=\"no-referrer\"><br>Safari</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr>\r\n                <td style='text-align:center;'>last 2 versions</td>\r\n                <td style='text-align:center;'>last 2 versions</td>\r\n                <td style='text-align:center;'>last 2 versions</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</figure>\r\n        `);\r\n      },\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./MarkdownEditor.vue?vue&type=template&id=31d4e9bd&scoped=true\"\nimport script from \"./MarkdownEditor.vue?vue&type=script&lang=js\"\nexport * from \"./MarkdownEditor.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-31d4e9bd\"\n\nexport default script","/*!\n * Vditor v3.8.5 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 694:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0; // Cost of an empty edit operation in terms of edit characters.\n\n  this.Diff_EditCost = 4; // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n\n  this.Match_Threshold = 0.5; // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n\n  this.Match_Distance = 1000; // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n\n  this.Patch_DeleteThreshold = 0.5; // Chunk size for context length.\n\n  this.Patch_Margin = 4; // The number of bits in an int.\n\n  this.Match_MaxBits = 32;\n}; //  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\n\n\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\n\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n\n  var deadline = opt_deadline; // Check for null inputs.\n\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  } // Check for equality (speedup).\n\n\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n\n  var checklines = opt_checklines; // Trim off common prefix (speedup).\n\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength); // Trim off common suffix (speedup).\n\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength); // Compute the diff on the middle block.\n\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline); // Restore the prefix and suffix.\n\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))]; // Swap insertions for deletions if diff is reversed.\n\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  } // Check to see if the problem can be split in two.\n\n\n  var hm = this.diff_halfMatch_(text1, text2);\n\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4]; // Send both pairs off for separate processing.\n\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline); // Merge the results.\n\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline); // Convert the diff back to original text.\n\n  this.diff_charsToLines_(diffs, linearray); // Eliminate freak matches (e.g. blank lines)\n\n  this.diff_cleanupSemantic(diffs); // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n\n          pointer = pointer + subDiff.length;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n\n    pointer++;\n  }\n\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length); // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length; // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n\n  var front = delta % 2 != 0; // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    } // Walk the front path one step.\n\n\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n\n      var y1 = x1 - k1;\n\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n\n      v1[k1_offset] = x1;\n\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    } // Walk the reverse path one step.\n\n\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n\n      var y2 = x2 - k2;\n\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n\n      v2[k2_offset] = x2;\n\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset; // Mirror x2 onto top-left coordinate system.\n\n          x2 = text1_length - x2;\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  } // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n\n\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y); // Compute both diffs serially.\n\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n\n  lineArray[0] = '';\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n\n  function diff_linesToCharsMunge_(text) {\n    var chars = ''; // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n\n    var lineStart = 0;\n    var lineEnd = -1; // Keeping our own length variable is faster than looking it up.\n\n    var lineArrayLength = lineArray.length;\n\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n\n      lineStart = lineEnd + 1;\n    }\n\n    return chars;\n  } // Allocate 2/3rds of the space for text1, the rest for text2.\n\n\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n\n    diffs[i][1] = text.join('');\n  }\n};\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\n\n\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\n\n\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length; // Eliminate the null case.\n\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  } // Truncate the longer string.\n\n\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n\n  var text_length = Math.min(text1_length, text2_length); // Quick check for the worst case.\n\n  if (text1 == text2) {\n    return text_length;\n  } // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n\n\n  var best = 0;\n  var length = 1;\n\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n\n    if (found == -1) {\n      return best;\n    }\n\n    length += found;\n\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  } // First check if the second quarter is the seed for a half-match.\n\n\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4)); // Check again based on the third quarter.\n\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  } // A half-match was found, sort out the return data.\n\n\n  var text1_a, text1_b, text2_a, text2_b;\n\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n\n  var length_insertions1 = 0;\n  var length_deletions1 = 0; // Number of characters that changed after the equality.\n\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      } // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n\n\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT; // Throw away the equality we just deleted.\n\n        equalitiesLength--; // Throw away the previous equality (it needs to be reevaluated).\n\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // Normalize the diff.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n\n  this.diff_cleanupSemanticLossless(diffs); // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n\n  pointer = 1;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n\n      pointer++;\n    }\n\n    pointer++;\n  }\n};\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    } // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n\n\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n\n    return 0;\n  }\n\n  var pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1]; // First, shift the edit as far left as possible.\n\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      } // Second, step character by character right, looking for the best fit.\n\n\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2); // The >= encourages trailing rather than leading whitespace on edits.\n\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n\n        diffs[pointer][1] = bestEdit;\n\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n\n    pointer++;\n  }\n}; // Define some regex patterns for matching boundaries.\n\n\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n\n  var pre_ins = false; // Is there a deletion operation before the last equality.\n\n  var pre_del = false; // Is there an insertion operation after the last equality.\n\n  var post_ins = false; // Is there a deletion operation after the last equality.\n\n  var post_del = false;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n\n\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n\n        lastEquality = null;\n\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n\n        changes = true;\n      }\n    }\n\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            } // Factor out any common suffixies.\n\n\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          } // Delete the offending records and add the merged ones.\n\n\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  } // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n\n\n  var changes = false;\n  pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // If shifts were made, the diff needs reordering and another shift sweep.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\n\n\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  } // Was the location was deleted?\n\n\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  } // Add the remaining character length.\n\n\n  return last_chars2 + (loc - last_chars1);\n};\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\n\n\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n\n    var data = diffs[x][1]; // Text of change.\n\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n\n  return html.join('');\n};\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\n\n\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\n\n\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\n\n\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\n\n\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n\n  var pointer = 0; // Cursor in text1\n\n  var tokens = delta.split(/\\t/g);\n\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n\n        break;\n\n      case '-': // Fall through.\n\n      case '=':\n        var n = parseInt(param, 10);\n\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n\n        var text = text1.substring(pointer, pointer += n);\n\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n\n        break;\n\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n\n    }\n  }\n\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n\n  return diffs;\n}; //  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\n\n\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  } // Initialise the alphabet.\n\n\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n\n    return accuracy + proximity / dmp.Match_Distance;\n  } // Highest score beyond which we give up.\n\n\n  var score_threshold = this.Match_Threshold; // Is there a nearby exact match? (speedup)\n\n  var best_loc = text.indexOf(pattern, loc);\n\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold); // What about in the other direction? (speedup)\n\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  } // Initialise the bit arrays.\n\n\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n\n    last_rd = rd;\n  }\n\n  return best_loc;\n};\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n\n  return s;\n}; //  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\n\n\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0; // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  } // Add one chunk for good luck.\n\n\n  padding += this.Patch_Margin; // Add the prefix.\n\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  } // Add the suffix.\n\n\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  } // Roll back the start points.\n\n\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length; // Extend the lengths.\n\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs = this.diff_main(text1,\n    /** @type {string} */\n    opt_b, true);\n\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n\n  var char_count1 = 0; // Number of characters into the text1 string.\n\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0; // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n\n        break;\n    } // Update the current character count.\n\n\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  } // Pick up the leftover patch if not empty.\n\n\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n\n  return patchesCopy;\n};\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\n\n\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  } // Deep copy the patches so that no changes are made to originals.\n\n\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches); // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n\n  var delta = 0;\n  var results = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false; // Subtract the delta for this failed patch from subsequent patches.\n\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  } // Strip the padding off.\n\n\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\n\n\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  } // Bump all the patches forward.\n\n\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  } // Add some padding on start of first diff.\n\n\n  var patch = patches[0];\n  var diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n\n    patch.start2 -= paddingLength; // Should be 0.\n\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  } // Add some padding on end of last diff.\n\n\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n\n    var bigpatch = patches[x]; // Remove the big old patch.\n\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      } // Compute the head context for the next patch.\n\n\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin); // Append the end context for this patch.\n\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\n\n\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n\n  return text.join('');\n};\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n\n  if (!textline) {\n    return patches;\n  }\n\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {// Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n\n      textPointer++;\n    }\n  }\n\n  return patches;\n};\n/**\n * Class representing one patch operation.\n * @constructor\n */\n\n\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n\n  this.start1 = null;\n  /** @type {?number} */\n\n  this.start2 = null;\n  /** @type {number} */\n\n  this.length1 = 0;\n  /** @type {number} */\n\n  this.length2 = 0;\n};\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\n\n\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op; // Escape the body of the patch with %xx notation.\n\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n\n      case DIFF_DELETE:\n        op = '-';\n        break;\n\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n\n  return text.join('').replace(/%20/g, ' ');\n}; // The following export code was added by @ForbesLindesay\n\n\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 157:\n/***/ (() => {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 857:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"div\");\n        speechDom.className = \"vditor-speech\";\n        document.body.insertAdjacentElement(\"beforeend\", speechDom);\n        var getVoice = function () {\n            var voices = speechSynthesis.getVoices();\n            var currentVoice;\n            var defaultVoice;\n            voices.forEach(function (item) {\n                if (item.lang === lang.replace(\"_\", \"-\")) {\n                    currentVoice = item;\n                }\n                if (item.default) {\n                    defaultVoice = item;\n                }\n            });\n            if (!currentVoice) {\n                currentVoice = defaultVoice;\n            }\n            return currentVoice;\n        };\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n        var voice_1 = getVoice();\n        speechDom.onclick = function () {\n            if (speechDom.className === \"vditor-speech\") {\n                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute(\"data-text\"));\n                utterThis.voice = voice_1;\n                utterThis.onend = function () {\n                    speechDom.className = \"vditor-speech\";\n                    speechSynthesis.cancel();\n                    speechDom.innerHTML = playSVG;\n                };\n                speechSynthesis.speak(utterThis);\n                speechDom.className = \"vditor-speech vditor-speech--current\";\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n        };\n        document.body.addEventListener(\"click\", function () {\n            if (getSelection().toString().trim() === \"\" && speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechSynthesis.cancel();\n                speechDom.style.display = \"none\";\n            }\n        });\n    }\n    element.addEventListener(\"mouseup\", function (event) {\n        var text = getSelection().toString().trim();\n        speechSynthesis.cancel();\n        if (getSelection().toString().trim() === \"\") {\n            if (speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechDom.style.display = \"none\";\n            }\n            return;\n        }\n        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();\n        var rect = getSelection().getRangeAt(0).getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        speechDom.style.left = (event.screenX + 2) + \"px\";\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: ((options && options.emojiPath) || constants/* Constants.CDN */.g.CDN) + \"/dist/images/emoji\",\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement, mergedOptions.lang);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                (0,mediaRender/* mediaRender */.Y)(previewElement);\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement, mergedOptions.lang);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                if (mergedOptions.icon) {\n                    (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /** 点击图片放大 */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /** 为 element 中的代码块添加复制按钮 */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /** 对 graphviz 进行渲染 */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /** 为 element 中的代码块进行高亮渲染 */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /** 对数学公式进行渲染 */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** 流程图/时序图/甘特图渲染 */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** flowchart.js 渲染 */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /** 图表渲染 */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /** 五线谱渲染 */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /** 脑图渲染 */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml渲染 */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /** 大纲渲染 */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** 为[特定链接](https://github.com/Vanessa219/vditor/issues/7)分别渲染为视频、音频、嵌入的 iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /** 对选中的文字进行阅读 */\n    Vditor.speechRender = speechRender;\n    /** 对图片进行懒加载 */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown 文本转换为 HTML，该方法需使用[异步编程](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /** 页面 Markdown 文章渲染 */\n    Vditor.preview = previewRender;\n    /** 设置代码主题 */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /** 设置内容主题 */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 260:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.8.5\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"abap\", \"algol\", \"algol_nu\", \"arduino\", \"autumn\", \"borland\", \"bw\",\n        \"colorful\", \"dracula\", \"emacs\", \"friendly\", \"fruity\", \"github\", \"igor\", \"lovelace\", \"manni\", \"monokai\",\n        \"monokailight\", \"murphy\", \"native\", \"paraiso-dark\", \"paraiso-light\", \"pastie\", \"perldoc\", \"pygments\",\n        \"rainbow_dash\", \"rrt\", \"solarized-dark\", \"solarized-dark256\", \"solarized-light\", \"swapoff\", \"tango\", \"trac\",\n        \"vim\", \"vs\", \"xcode\", \"ant-design\"];\n    Constants.CODE_LANGUAGES = [\"mermaid\", \"echarts\", \"mindmap\", \"plantuml\", \"abc\", \"graphviz\", \"flowchart\", \"apache\",\n        \"js\", \"ts\", \"html\",\n        // common\n        \"properties\", \"apache\", \"bash\", \"c\", \"csharp\", \"cpp\", \"css\", \"coffeescript\", \"diff\", \"go\", \"xml\", \"http\",\n        \"json\", \"java\", \"javascript\", \"kotlin\", \"less\", \"lua\", \"makefile\", \"markdown\", \"nginx\", \"objectivec\", \"php\",\n        \"php-template\", \"perl\", \"plaintext\", \"python\", \"python-repl\", \"r\", \"ruby\", \"rust\", \"scss\", \"sql\", \"shell\",\n        \"swift\", \"ini\", \"typescript\", \"vbnet\", \"yaml\",\n        \"ada\", \"clojure\", \"dart\", \"erb\", \"fortran\", \"gradle\", \"haskell\", \"julia\", \"julia-repl\", \"lisp\", \"matlab\",\n        \"pgsql\", \"powershell\", \"sql_more\", \"stata\", \"cmake\", \"mathematica\"];\n    Constants.CDN = \"https://cdn.jsdelivr.net/npm/vditor@\" + \"3.8.5\";\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: Constants.CDN + \"/dist/css/content-theme\",\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 577:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"a\": () => (/* binding */ i18n)\n/* harmony export */ });\nvar i18n = {\n    en_US: {\n        \"alignCenter\": \"Center\",\n        \"alignLeft\": \"Left\",\n        \"alignRight\": \"Right\",\n        \"alternateText\": \"Alternate text\",\n        \"bold\": \"Blod\",\n        \"both\": \"editor & preview\",\n        \"check\": \"Task List\",\n        \"close\": \"Close\",\n        \"code\": \"Code Block\",\n        \"code-theme\": \"Code Block Theme Preview\",\n        \"column\": \"Column\",\n        \"comment\": \"Comment\",\n        \"confirm\": \"Confirm\",\n        \"content-theme\": \"Content Theme Preview\",\n        \"copied\": \"Copied\",\n        \"copy\": \"Copy\",\n        \"delete-column\": \"Delete Row\",\n        \"delete-row\": \"Delete Column\",\n        \"devtools\": \"DevTools\",\n        \"down\": \"Down\",\n        \"downloadTip\": \"The browser does not support the download function\",\n        \"edit\": \"Edit\",\n        \"edit-mode\": \"Toggle Edit Mode\",\n        \"emoji\": \"Emoji\",\n        \"export\": \"Export\",\n        \"fileTypeError\": \"file type is error\",\n        \"footnoteRef\": \"Footnote Ref\",\n        \"fullscreen\": \"Toggle Fullscreen\",\n        \"generate\": \"Generating\",\n        \"headings\": \"Headings\",\n        \"help\": \"Help\",\n        \"imageURL\": \"image URL\",\n        \"indent\": \"Indent\",\n        \"info\": \"Info\",\n        \"inline-code\": \"Inline Code\",\n        \"insert-after\": \"Insert line after\",\n        \"insert-before\": \"Insert line Before\",\n        \"insertColumnLeft\": \"Insert 1 left\",\n        \"insertColumnRight\": \"Insert 1 right\",\n        \"insertRowAbove\": \"Insert 1 above\",\n        \"insertRowBelow\": \"Insert 1 below\",\n        \"instantRendering\": \"Instant Rendering\",\n        \"italic\": \"Italic\",\n        \"language\": \"Language\",\n        \"line\": \"Line\",\n        \"link\": \"Link\",\n        \"linkRef\": \"Link Ref\",\n        \"list\": \"List\",\n        \"more\": \"More\",\n        \"nameEmpty\": \"Name is empty\",\n        \"ordered-list\": \"Order List\",\n        \"outdent\": \"Outdent\",\n        \"outline\": \"Outline\",\n        \"over\": \"over\",\n        \"performanceTip\": \"Real-time preview requires ${x}ms, you can close it\",\n        \"preview\": \"Preview\",\n        \"quote\": \"Quote\",\n        \"record\": \"Start Record/End Record\",\n        \"record-tip\": \"The device does not support recording\",\n        \"recording\": \"recording...\",\n        \"redo\": \"Redo\",\n        \"remove\": \"Remove\",\n        \"row\": \"Row\",\n        \"spin\": \"Spin\",\n        \"splitView\": \"Split View\",\n        \"strike\": \"Strike\",\n        \"table\": \"Table\",\n        \"textIsNotEmpty\": \"text(no empty)\",\n        \"title\": \"Title\",\n        \"tooltipText\": \"Tooltip text\",\n        \"undo\": \"Undo\",\n        \"up\": \"Up\",\n        \"update\": \"Update\",\n        \"upload\": \"Upload image or file\",\n        \"uploadError\": \"upload error\",\n        \"uploading\": \"uploading...\",\n        \"wysiwyg\": \"WYSIWYG\",\n    },\n    ja_JP: {\n        \"alignCenter\": \"中央\",\n        \"alignLeft\": \"左側\",\n        \"alignRight\": \"右側\",\n        \"alternateText\": \"イメージタグ\",\n        \"bold\": \"太く\",\n        \"both\": \"エディター & プレビュー\",\n        \"check\": \"チェックリスト\",\n        \"close\": \"閉じる\",\n        \"code\": \"コードブロック挿入\",\n        \"code-theme\": \"コードブロックテーマ\",\n        \"column\": \"行列\",\n        \"comment\": \"コメント\",\n        \"confirm\": \"確認\",\n        \"content-theme\": \"コンテンツテーマ\",\n        \"copied\": \"コピー完了\",\n        \"copy\": \"コピー\",\n        \"delete-column\": \"列 消去\",\n        \"delete-row\": \"行 消去\",\n        \"devtools\": \"開発ツール\",\n        \"down\": \"ダウンロード\",\n        \"downloadTip\": \"ブラウザがダウンロード機能をサポートしていません。\",\n        \"edit\": \"修正\",\n        \"edit-mode\": \"編集モード\",\n        \"emoji\": \"絵文字\",\n        \"export\": \"書き出し\",\n        \"fileTypeError\": \"サポートしていません。\",\n        \"footnoteRef\": \"脚注参照\",\n        \"fullscreen\": \"全体画面\",\n        \"generate\": \"作成する\",\n        \"headings\": \"タイトル大きさ\",\n        \"help\": \"ヘルプ\",\n        \"imageURL\": \"イメージ URL\",\n        \"indent\": \"字下げ\",\n        \"info\": \"情報\",\n        \"inline-code\": \"インラインコード\",\n        \"insert-after\": \"ブロックの後ろに入力\",\n        \"insert-before\": \"ブロックの前に入力\",\n        \"insertColumnLeft\": \"左側に列を挿入\",\n        \"insertColumnRight\": \"右側に列を挿入\",\n        \"insertRowAbove\": \"上に行を挿入\",\n        \"insertRowBelow\": \"下に行を挿入\",\n        \"instantRendering\": \"インスタントレンダリング\",\n        \"italic\": \"斜体\",\n        \"language\": \"言語\",\n        \"line\": \"段落分割\",\n        \"link\": \"リンク\",\n        \"linkRef\": \"リンク参照\",\n        \"list\": \"リスト\",\n        \"more\": \"詳しく見る\",\n        \"nameEmpty\": \"名前が入力されていません。\",\n        \"ordered-list\": \"順序のあるリスト\",\n        \"outdent\": \"ぶら下げインデント\",\n        \"outline\": \"概要\",\n        \"over\": \"オーバー\",\n        \"performanceTip\": \"リアルタイムプレビューには、${x}msが必要でエディター/プレビューボタンをクリックして閉じる事が出来ます。\",\n        \"preview\": \"プレビュー\",\n        \"quote\": \"引用段落\",\n        \"record\": \"録音開始/録音終了\",\n        \"record-tip\": \"録音がサポートされていません。\",\n        \"recording\": \"録音中...\",\n        \"redo\": \"戻る\",\n        \"remove\": \"消去\",\n        \"row\": \"列\",\n        \"spin\": \"スピン\",\n        \"splitView\": \"マークダウン\",\n        \"strike\": \"取り消し線\",\n        \"table\": \"表 挿入\",\n        \"textIsNotEmpty\": \"テキスト(no empty)\",\n        \"title\": \"題名\",\n        \"tooltipText\": \"ツールチップ\",\n        \"undo\": \"取り消す\",\n        \"up\": \"戻る\",\n        \"update\": \"アップデート\",\n        \"upload\": \"イメージをダウンロードする\",\n        \"uploadError\": \"アップロード失敗\",\n        \"uploading\": \"アップロード中\",\n        \"wysiwyg\": \"ウィジウィグ\",\n    },\n    ko_KR: {\n        \"alignCenter\": \"가운데\",\n        \"alignLeft\": \"왼쪽\",\n        \"alignRight\": \"오른쪽\",\n        \"alternateText\": \"이미지 태그\",\n        \"bold\": \"굵게\",\n        \"both\": \"에디터 & 미리보기\",\n        \"check\": \"체크박스\",\n        \"close\": \"닫기\",\n        \"code\": \"코드블럭삽입\",\n        \"code-theme\": \"코드블럭테마\",\n        \"column\": \"행\",\n        \"comment\": \"코멘트\",\n        \"confirm\": \"확인\",\n        \"content-theme\": \"컨텐츠테마\",\n        \"copied\": \"복사완료\",\n        \"copy\": \"복사\",\n        \"delete-column\": \"열 삭제\",\n        \"delete-row\": \"행 삭제\",\n        \"devtools\": \"개발툴\",\n        \"down\": \"다운\",\n        \"downloadTip\": \"브라우저가 다운로드 기능을 지원하지 않습니다\",\n        \"edit\": \"수정\",\n        \"edit-mode\": \"편집모드\",\n        \"emoji\": \"이모지\",\n        \"export\": \"내보내기\",\n        \"fileTypeError\": \"지원하지않습니다.\",\n        \"footnoteRef\": \"각주참조\",\n        \"fullscreen\": \"전체화면\",\n        \"generate\": \"생성\",\n        \"headings\": \"제목크기\",\n        \"help\": \"도움말\",\n        \"imageURL\": \"이미지 URL\",\n        \"indent\": \"들여쓰기\",\n        \"info\": \"정보\",\n        \"inline-code\": \"인라인코드\",\n        \"insert-after\": \"블락 뒤로 입력\",\n        \"insert-before\": \"블락 앞으로 입력\",\n        \"insertColumnLeft\": \"왼쪽에 열 삽입\",\n        \"insertColumnRight\": \"오른쪽에 열 삽입\",\n        \"insertRowAbove\": \"위에 행 삽입\",\n        \"insertRowBelow\": \"아래에 행 삽입\",\n        \"instantRendering\": \"타이포라\",\n        \"italic\": \"기울임꼴\",\n        \"language\": \"언어\",\n        \"line\": \"문단나눔\",\n        \"link\": \"링크\",\n        \"linkRef\": \"링크 참조\",\n        \"list\": \"순서없는 목록\",\n        \"more\": \"더보기\",\n        \"nameEmpty\": \"이름이 비어있습니다.\",\n        \"ordered-list\": \"순서있는 목록\",\n        \"outdent\": \"내어쓰기\",\n        \"outline\": \"개요\",\n        \"over\": \"오버\",\n        \"performanceTip\": \"실시간 미리보기에는 ${x}ms가 필요하며 에디터/미리보기 버튼을 클릭하여 닫을 수 있습니다.\",\n        \"preview\": \"미리보기\",\n        \"quote\": \"인용단락\",\n        \"record\": \"녹음시작/녹음종료\",\n        \"record-tip\": \"녹음을 지원하지 않습니다.\",\n        \"recording\": \"녹음중...\",\n        \"redo\": \"되돌리기\",\n        \"remove\": \"삭제\",\n        \"row\": \"열\",\n        \"spin\": \"회전\",\n        \"splitView\": \"마크다운\",\n        \"strike\": \"취소선\",\n        \"table\": \"표삽입\",\n        \"textIsNotEmpty\": \"텍스트(no empty)\",\n        \"title\": \"표제\",\n        \"tooltipText\": \"툴팁\",\n        \"undo\": \"취소하기\",\n        \"up\": \"위로\",\n        \"update\": \"업데이트\",\n        \"upload\": \"이미지 업로드하기\",\n        \"uploadError\": \"업로드 실패\",\n        \"uploading\": \"업로드중...\",\n        \"wysiwyg\": \"위지위그\",\n    },\n    ru_RU: {\n        \"alignCenter\": \"Выровнять по центру\",\n        \"alignLeft\": \"Выровнять по левому краю\",\n        \"alignRight\": \"Выровнять по правому краю\",\n        \"alternateText\": \"Альтернативный текст\",\n        \"bold\": \"Полужирный текст\",\n        \"both\": \"Редактор с предпросмотром\",\n        \"check\": \"Список задач\",\n        \"close\": \"Закрыть\",\n        \"code\": \"Блок кода\",\n        \"code-theme\": \"Тема отображения блока кода\",\n        \"column\": \"Количество столбцов\",\n        \"comment\": \"Комментарий\",\n        \"confirm\": \"Подтвердить\",\n        \"content-theme\": \"Тема отображения контента\",\n        \"copied\": \"Скопировано\",\n        \"copy\": \"Копировать\",\n        \"delete-column\": \"Удалить столбец\",\n        \"delete-row\": \"Удалить строку\",\n        \"devtools\": \"Граф документа\",\n        \"down\": \"Переместить вниз\",\n        \"downloadTip\": \"Браузер не поддерживает функции загрузки\",\n        \"edit\": \"Редактирование\",\n        \"edit-mode\": \"Переключить режим редактирования\",\n        \"emoji\": \"Смайлы\",\n        \"export\": \"Экспорт\",\n        \"fileTypeError\": \"Ошибка типа файла\",\n        \"footnoteRef\": \"Сноска\",\n        \"fullscreen\": \"Переключиться на полный экран\",\n        \"generate\": \"Генерация\",\n        \"headings\": \"Заголовки\",\n        \"help\": \"Помощь\",\n        \"imageURL\": \"Ссылка на картинку\",\n        \"indent\": \"Отступ\",\n        \"info\": \"Информация о редакторе\",\n        \"inline-code\": \"Встроенный код \",\n        \"insert-after\": \"Вставить линию после этой строки\",\n        \"insert-before\": \"Вставить линию перед этой строкой\",\n        \"insertColumnLeft\": \"Вставить столбец слева\",\n        \"insertColumnRight\": \"Вставить столбец справа\",\n        \"insertRowAbove\": \"Вставить строку сверху\",\n        \"insertRowBelow\": \"Вставить строку снизу\",\n        \"instantRendering\": \"Мгновенный рендеринг\",\n        \"italic\": \"Курсив\",\n        \"language\": \"Синтаксис\",\n        \"line\": \"Линия\",\n        \"link\": \"Ссылка\",\n        \"linkRef\": \"Вставить ссылку\",\n        \"list\": \"Список\",\n        \"more\": \"Дополнительно\",\n        \"nameEmpty\": \"Имя пустое\",\n        \"ordered-list\": \"Упорядоченный список\",\n        \"outdent\": \"Выступ\",\n        \"outline\": \"Содержание\",\n        \"over\": \"Над\",\n        \"performanceTip\": \"Предварительный просмотр в реальном времени требует ${x}мс, вы можете закрыть его\",\n        \"preview\": \"Предпросмотр\",\n        \"quote\": \"Цитата\",\n        \"record\": \"Начать запись/Завершить запись\",\n        \"record-tip\": \"Устройство не поддерживает запись\",\n        \"recording\": \"Запись...\",\n        \"redo\": \"Вернуть\",\n        \"remove\": \"Удалить\",\n        \"row\": \"Количество строк\",\n        \"spin\": \"Прокрутка\",\n        \"splitView\": \"Разделенный просмотр\",\n        \"strike\": \"Зачеркнутый текст\",\n        \"table\": \"Таблица\",\n        \"textIsNotEmpty\": \"Текст (непустой)\",\n        \"title\": \"Заголовок\",\n        \"tooltipText\": \"Текст всплывающей подсказки\",\n        \"undo\": \"Отменить\",\n        \"up\": \"Переместить вверх\",\n        \"update\": \"Обновить\",\n        \"upload\": \"Загрузить изображение или файл\",\n        \"uploadError\": \"Ошибка загрузки\",\n        \"uploading\": \"Загрузка...\",\n        \"wysiwyg\": \"Редактор WYSIWYG\",\n    },\n    zh_CN: {\n        \"alignCenter\": \"居中\",\n        \"alignLeft\": \"居左\",\n        \"alignRight\": \"居右\",\n        \"alternateText\": \"替代文本\",\n        \"bold\": \"粗体\",\n        \"both\": \"编辑 & 预览\",\n        \"check\": \"任务列表\",\n        \"close\": \"关闭\",\n        \"code\": \"代码块\",\n        \"code-theme\": \"代码块主题预览\",\n        \"column\": \"列\",\n        \"comment\": \"评论\",\n        \"confirm\": \"确定\",\n        \"content-theme\": \"内容主题预览\",\n        \"copied\": \"已复制\",\n        \"copy\": \"复制\",\n        \"delete-column\": \"删除列\",\n        \"delete-row\": \"删除行\",\n        \"devtools\": \"开发者工具\",\n        \"down\": \"下\",\n        \"downloadTip\": \"该浏览器不支持下载功能\",\n        \"edit\": \"编辑\",\n        \"edit-mode\": \"切换编辑模式\",\n        \"emoji\": \"表情\",\n        \"export\": \"导出\",\n        \"fileTypeError\": \"文件类型不允许上传\",\n        \"footnoteRef\": \"脚注标识\",\n        \"fullscreen\": \"全屏切换\",\n        \"generate\": \"生成中\",\n        \"headings\": \"标题\",\n        \"help\": \"帮助\",\n        \"imageURL\": \"图片地址\",\n        \"indent\": \"列表缩进\",\n        \"info\": \"关于\",\n        \"inline-code\": \"行内代码\",\n        \"insert-after\": \"末尾插入行\",\n        \"insert-before\": \"起始插入行\",\n        \"insertColumnLeft\": \"在左边插入一列\",\n        \"insertColumnRight\": \"在右边插入一列\",\n        \"insertRowAbove\": \"在上方插入一行\",\n        \"insertRowBelow\": \"在下方插入一行\",\n        \"instantRendering\": \"即时渲染\",\n        \"italic\": \"斜体\",\n        \"language\": \"语言\",\n        \"line\": \"分隔线\",\n        \"link\": \"链接\",\n        \"linkRef\": \"引用标识\",\n        \"list\": \"无序列表\",\n        \"more\": \"更多\",\n        \"nameEmpty\": \"文件名不能为空\",\n        \"ordered-list\": \"有序列表\",\n        \"outdent\": \"列表反向缩进\",\n        \"outline\": \"大纲\",\n        \"over\": \"超过\",\n        \"performanceTip\": \"实时预览需 ${x}ms，可点击编辑 & 预览按钮进行关闭\",\n        \"preview\": \"预览\",\n        \"quote\": \"引用\",\n        \"record\": \"开始录音/结束录音\",\n        \"record-tip\": \"该设备不支持录音功能\",\n        \"recording\": \"录音中...\",\n        \"redo\": \"重做\",\n        \"remove\": \"删除\",\n        \"row\": \"行\",\n        \"spin\": \"旋转\",\n        \"splitView\": \"分屏预览\",\n        \"strike\": \"删除线\",\n        \"table\": \"表格\",\n        \"textIsNotEmpty\": \"文本（不能为空）\",\n        \"title\": \"标题\",\n        \"tooltipText\": \"提示文本\",\n        \"undo\": \"撤销\",\n        \"up\": \"上\",\n        \"update\": \"更新\",\n        \"upload\": \"上传图片或文件\",\n        \"uploadError\": \"上传错误\",\n        \"uploading\": \"上传中...\",\n        \"wysiwyg\": \"所见即所得\",\n    },\n    zh_TW: {\n        \"alignCenter\": \"置中\",\n        \"alignLeft\": \"置左\",\n        \"alignRight\": \"置右\",\n        \"alternateText\": \"替代文字\",\n        \"bold\": \"粗體\",\n        \"both\": \"編輯 & 預覽\",\n        \"check\": \"任務列表\",\n        \"close\": \"關閉\",\n        \"code\": \"代碼塊\",\n        \"code-theme\": \"代碼塊主題預覽\",\n        \"column\": \"欄\",\n        \"comment\": \"評論\",\n        \"confirm\": \"確定\",\n        \"content-theme\": \"內容主題預覽\",\n        \"copied\": \"已複製\",\n        \"copy\": \"複製\",\n        \"delete-column\": \"刪除欄\",\n        \"delete-row\": \"刪除列\",\n        \"devtools\": \"開發者工具\",\n        \"down\": \"下\",\n        \"downloadTip\": \"該瀏覽器不支持下載功能\",\n        \"edit\": \"編輯\",\n        \"edit-mode\": \"切換編輯模式\",\n        \"emoji\": \"表情\",\n        \"export\": \"匯出\",\n        \"fileTypeError\": \"檔案類型不允許上傳\",\n        \"footnoteRef\": \"腳註參考\",\n        \"fullscreen\": \"全螢幕切換\",\n        \"generate\": \"生成中\",\n        \"headings\": \"標題\",\n        \"help\": \"幫助\",\n        \"imageURL\": \"圖片位址\",\n        \"indent\": \"列表縮排\",\n        \"info\": \"關於\",\n        \"inline-code\": \"行內代碼\",\n        \"insert-after\": \"末尾插入列\",\n        \"insert-before\": \"起始插入列\",\n        \"insertColumnLeft\": \"在左邊插入一欄\",\n        \"insertColumnRight\": \"在右邊插入一欄\",\n        \"insertRowAbove\": \"在上方插入一行\",\n        \"insertRowBelow\": \"在下方插入一行\",\n        \"instantRendering\": \"即時渲染\",\n        \"italic\": \"斜體\",\n        \"language\": \"語言\",\n        \"line\": \"分隔線\",\n        \"link\": \"連結\",\n        \"linkRef\": \"連結參考\",\n        \"list\": \"無序列表\",\n        \"more\": \"更多\",\n        \"nameEmpty\": \"文件名不能為空\",\n        \"ordered-list\": \"有序列表\",\n        \"outdent\": \"列表反向縮排\",\n        \"outline\": \"大綱\",\n        \"over\": \"超過\",\n        \"performanceTip\": \"即時預覽需 ${x}ms，可點擊編輯 & 預覽按鈕進行關閉\",\n        \"preview\": \"預覽\",\n        \"quote\": \"引用\",\n        \"record\": \"開始錄音/結束錄音\",\n        \"record-tip\": \"該設備不支持錄音功能\",\n        \"recording\": \"錄音中...\",\n        \"redo\": \"重做\",\n        \"remove\": \"刪除\",\n        \"row\": \"列\",\n        \"spin\": \"旋轉\",\n        \"splitView\": \"分割預覽\",\n        \"strike\": \"刪除縣\",\n        \"table\": \"表格\",\n        \"textIsNotEmpty\": \"文字（不能為空）\",\n        \"title\": \"標題\",\n        \"tooltipText\": \"提示文字\",\n        \"undo\": \"撤銷\",\n        \"up\": \"上\",\n        \"update\": \"更新\",\n        \"upload\": \"上傳圖片或文件\",\n        \"uploadError\": \"上傳錯誤\",\n        \"uploading\": \"上傳中...\",\n        \"wysiwyg\": \"所見即所得\",\n    }\n};\n\n\n/***/ }),\n\n/***/ 369:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = element.querySelectorAll(\".language-abc\");\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/abcjs/abcjs_basic.min.js\", \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, item.textContent.trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 726:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = element.querySelectorAll(\".language-echarts\");\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = e.innerText.trim();\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    var option = JSON.parse(text);\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"echarts render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 23:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _i18n_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(577);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(769);\n\n\nvar codeRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    element.querySelectorAll(\"pre > code\").forEach(function (e, index) {\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\")) {\n            return;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return;\n        }\n        // 避免预览区在渲染后由于代码块过多产生性能问题 https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return;\n        }\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = document.createElement(\"code\");\n            codeElement.innerHTML = e.innerHTML;\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\" + _i18n_index__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].copy + \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\" + _i18n_index__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].copy + \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"this.previousElementSibling.select();document.execCommand('copy');\" +\n            (\"this.setAttribute('aria-label', '\" + _i18n_index__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].copied + \"')\\\"><svg><use xlink:href=\\\"#vditor-icon-copy\\\"></use></svg></span>\");\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_1__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n    });\n};\n\n\n/***/ }),\n\n/***/ 383:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = element.querySelectorAll(\".language-flowchart\");\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/flowchart.js/flowchart.min.js\", \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(item.textContent);\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 890:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = element.querySelectorAll(\".language-graphviz\");\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/graphviz/viz.js\", \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || e.textContent.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\" + document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\") + \"');\"], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(e.textContent).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\" + error;\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 93:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\";\n    if (vditorHljsStyle && vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\", \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/highlight.js/highlight.pack.js\", \"vditorHljsScript\").then(function () {\n        element.querySelectorAll(\"pre > code\").forEach(function (block) {\n            // ir & wysiwyg 区域不渲染\n            if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                return;\n            }\n            if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                block.classList.contains(\"language-plantuml\") ||\n                block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                block.classList.contains(\"language-math\")) {\n                return;\n            }\n            hljs.highlightElement(block);\n            if (!hljsOption.lineNumber) {\n                return;\n            }\n            block.classList.add(\"vditor-linenumber\");\n            var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n            if (!linenNumberTemp) {\n                linenNumberTemp = document.createElement(\"div\");\n                linenNumberTemp.className = \"vditor-linenumber__temp\";\n                block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n            }\n            var whiteSpace = getComputedStyle(block).whiteSpace;\n            var isSoftWrap = false;\n            if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                isSoftWrap = true;\n            }\n            var lineNumberHTML = \"\";\n            var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n            lineList.pop();\n            lineList.map(function (line) {\n                var lineHeight = \"\";\n                if (isSoftWrap) {\n                    linenNumberTemp.textContent = line || \"\\n\";\n                    lineHeight = \" style=\\\"height:\" + linenNumberTemp.getBoundingClientRect().height + \"px\\\"\";\n                }\n                lineNumberHTML += \"<span\" + lineHeight + \"></span>\";\n            });\n            linenNumberTemp.style.display = \"none\";\n            lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\" + lineNumberHTML + \"</span>\";\n            block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 323:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(769);\n\n\n\n\nvar mathRender = function (element, options) {\n    var mathElements = element.querySelectorAll(\".language-math\");\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(options.cdn + \"/dist/js/katex/katex.min.css\", \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(options.cdn + \"/dist/js/katex/katex.min.js\", \"vditorKatexScript\").then(function () {\n            mathElements.forEach(function (mathElement) {\n                if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (mathElement.getAttribute(\"data-math\")) {\n                    return;\n                }\n                var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_3__/* .code160to32 */ .X)(mathElement.textContent);\n                mathElement.setAttribute(\"data-math\", math);\n                try {\n                    mathElement.innerHTML = katex.renderToString(math, {\n                        displayMode: mathElement.tagName === \"DIV\",\n                        output: \"html\",\n                    });\n                }\n                catch (e) {\n                    mathElement.innerHTML = e.message;\n                    mathElement.className = \"language-math vditor-reset--error\";\n                }\n                mathElement.addEventListener(\"copy\", function (event) {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                    event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                    event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: options.cdn + \"/dist/js/mathjax\" },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n        }\n        // 循环加载会抛异常\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScriptSync */ .J)(options.cdn + \"/dist/js/mathjax/tex-svg-full.js\", \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_3__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_3__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 207:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></video>\");\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></audio>\");\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\" + (youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\")) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\" + youkuMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\" + qqMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\" + coubMatch[1] + \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\");\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\" + encodeURIComponent(facebookMatch[0]) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\" + dailymotionMatch[2] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (bilibiliMatch && bilibiliMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//player.bilibili.com/player.html?bvid=\" + bilibiliMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\" + tedMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 765:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = element.querySelectorAll(\".language-mermaid\");\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/mermaid/mermaid.min.js\", \"vditorMermaidScript\").then(function () {\n        var config = {\n            altFontFamily: \"sans-serif\",\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: true,\n            },\n            fontFamily: \"sans-serif\",\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20,\n            },\n            securityLevel: \"loose\",\n            sequence: {\n                boxMargin: 8,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                useMaxWidth: true,\n            },\n            startOnLoad: false,\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n            config.themeVariables = {\n                activationBkgColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                activationBorderColor: \"#81B1DB\",\n                activeTaskBkgColor: \"#81B1DB\",\n                activeTaskBorderColor: \"#ffffff\",\n                actorBkg: \"#1f2020\",\n                actorBorder: \"#81B1DB\",\n                actorLineColor: \"lightgrey\",\n                actorTextColor: \"lightgrey\",\n                altBackground: \"hsl(0, 0%, 40%)\",\n                altSectionBkgColor: \"#333\",\n                arrowheadColor: \"lightgrey\",\n                background: \"#333\",\n                border1: \"#81B1DB\",\n                border2: \"rgba(255, 255, 255, 0.25)\",\n                classText: \"#e0dfdf\",\n                clusterBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                clusterBorder: \"rgba(255, 255, 255, 0.25)\",\n                critBkgColor: \"#E83737\",\n                critBorderColor: \"#E83737\",\n                darkTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                defaultLinkColor: \"lightgrey\",\n                doneTaskBkgColor: \"lightgrey\",\n                doneTaskBorderColor: \"grey\",\n                edgeLabelBackground: \"hsl(0, 0%, 34.4117647059%)\",\n                errorBkgColor: \"#a44141\",\n                errorTextColor: \"#ddd\",\n                fillType0: \"#1f2020\",\n                fillType1: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                fillType2: \"hsl(244, 1.5873015873%, 12.3529411765%)\",\n                fillType3: \"hsl(244, 1.5873015873%, 28.3529411765%)\",\n                fillType4: \"hsl(116, 1.5873015873%, 12.3529411765%)\",\n                fillType5: \"hsl(116, 1.5873015873%, 28.3529411765%)\",\n                fillType6: \"hsl(308, 1.5873015873%, 12.3529411765%)\",\n                fillType7: \"hsl(308, 1.5873015873%, 28.3529411765%)\",\n                fontFamily: \"\\\"trebuchet ms\\\", verdana, arial\",\n                fontSize: \"16px\",\n                gridColor: \"lightgrey\",\n                labelBackground: \"#181818\",\n                labelBoxBkgColor: \"#1f2020\",\n                labelBoxBorderColor: \"#81B1DB\",\n                labelColor: \"#ccc\",\n                labelTextColor: \"lightgrey\",\n                lineColor: \"lightgrey\",\n                loopTextColor: \"lightgrey\",\n                mainBkg: \"#1f2020\",\n                mainContrastColor: \"lightgrey\",\n                nodeBkg: \"#1f2020\",\n                nodeBorder: \"#81B1DB\",\n                noteBkgColor: \"#fff5ad\",\n                noteBorderColor: \"rgba(255, 255, 255, 0.25)\",\n                noteTextColor: \"#1f2020\",\n                primaryBorderColor: \"hsl(180, 0%, 2.3529411765%)\",\n                primaryColor: \"#1f2020\",\n                primaryTextColor: \"#e0dfdf\",\n                secondBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryBorderColor: \"hsl(180, 0%, 18.3529411765%)\",\n                secondaryColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryTextColor: \"rgb(183.8476190475, 181.5523809523, 181.5523809523)\",\n                sectionBkgColor: \"hsl(52.9411764706, 28.813559322%, 58.431372549%)\",\n                sectionBkgColor2: \"#EAE8D9\",\n                sequenceNumberColor: \"black\",\n                signalColor: \"lightgrey\",\n                signalTextColor: \"lightgrey\",\n                taskBkgColor: \"hsl(180, 1.5873015873%, 35.3529411765%)\",\n                taskBorderColor: \"#ffffff\",\n                taskTextClickableColor: \"#003163\",\n                taskTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextDarkColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextLightColor: \"lightgrey\",\n                taskTextOutsideColor: \"lightgrey\",\n                tertiaryBorderColor: \"hsl(20, 0%, 2.3529411765%)\",\n                tertiaryColor: \"hsl(20, 1.5873015873%, 12.3529411765%)\",\n                tertiaryTextColor: \"rgb(222.9999999999, 223.6666666666, 223.9999999999)\",\n                textColor: \"#ccc\",\n                titleColor: \"#F9FFFE\",\n                todayLineColor: \"#DB5757\",\n            };\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\" || item.textContent.trim() === \"\") {\n                return;\n            }\n            mermaid.init(undefined, item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = element.querySelectorAll(\".language-mindmap\");\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = e.getAttribute(\"data-code\");\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 198:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(615);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            item.innerHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 583:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = element.querySelectorAll(\".language-plantuml\");\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_1__/* .addScript */ .G)(cdn + \"/dist/js/plantuml/plantuml-encoder.min.js\", \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = e.textContent.trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<img src=\\\"http://www.plantuml.com/plantuml/svg/~1\" + plantumlEncoder.encode(text) + \"\\\">\";\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\" + error;\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 792:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 264:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\n/* harmony import */ var _i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(577);\n\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\" + (theme === \"dark\" ? \" vditor--dark\" : \"\") + \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \" + _i18n__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].spin + \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\" + _i18n__WEBPACK_IMPORTED_MODULE_0__/* .i18n */ .a[lang].close + \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \" + oldImgElement.width + \"px;height:\" + oldImgElement.height + \"px;transform: translate3d(\" + oldImgRect.left + \"px, \" + (oldImgRect.top - height) + \"px, 0)\\\" src=\\\"\" + oldImgElement.getAttribute(\"src\") + \"\\\">\\n    </div>\\n</div>\");\n    document.body.style.overflow = \"hidden\";\n    // 图片从原始位置移动到预览正中间的动画效果\n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2 + \"px, 0)\";\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \" + translate3d);\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // 旋转\n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + (oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2) + \"px, 0) rotateZ(\" + deg + \"deg)\";\n        }\n        else {\n            imgElement.style.transform = translate3d + \" rotateZ(\" + deg + \"deg)\";\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 968:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + codeTheme + \".css\";\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 958:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(946);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = path + \"/\" + contentTheme + \".css\";\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.href !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 228:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync),\n/* harmony export */   \"G\": () => (/* binding */ addScript)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // 脚本加载后再次调用直接返回\n            resolve();\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        // 循环调用时 Chrome 不会重复请求 js\n        document.head.appendChild(scriptElement);\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                // 循环调用需清除 DOM 中的 script 标签\n                scriptElement.remove();\n                resolve();\n                return false;\n            }\n            scriptElement.id = id;\n            resolve();\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 946:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 769:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // 非打断空格转换为空格\n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 931:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n// 用户 iPhone 点击延迟/需要双击的处理\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n// 区别 mac 上的 ctrl 和 meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// Mac，Windows 快捷键展示\nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"⇧\") > -1 && isFirefox()) {\n            // Mac Firefox 按下 shift 后，key 同 windows 系统\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"⌘\")) {\n            hotkey = hotkey.replace(\"⌘\", \"⌘+\");\n        }\n        else if (hotkey.startsWith(\"⌥\") && hotkey.substr(1, 1) !== \"⌘\") {\n            hotkey = hotkey.replace(\"⌥\", \"⌥+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"⇧⌘\", \"⌘+⇧+\").replace(\"⌥⌘\", \"⌥+⌘+\");\n        }\n        hotkey = hotkey.replace(\"⌘\", \"Ctrl\").replace(\"⇧\", \"Shift\")\n            .replace(\"⌥\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 713:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(615);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 615:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE: 减少 method.ts 打包，故从 hasClosest.ts 中拆分\nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 224:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 187:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(713);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            // 空行时，会出现没有 br 的情况，需要根据父元素 <p> 获取位置信息\n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown 模式回车\n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // 内容为空\n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    // 使用 lute 方法会添加 p 元素，只有一个 p 元素的时候进行删除\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // 粘贴内容为块元素时，应在下一段落中插入\n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/assets/scss/index.scss\nvar scss = __webpack_require__(157);\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(857);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(769);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)((vditor.sv.element.textContent + \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(vditor.options.cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(931);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(615);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(method + \" - \" + type + \": \" + content);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // 网页源码\n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"<wbr></code></pre></div>\";\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</code><wbr>\";\n            }\n            return \"`\" + code + \"`\";\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (!language) {\n        return;\n    }\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n        (0,codeRender/* codeRender */.O)(previewPanel, vditor.options.lang);\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc 前无元素，插入空块\n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc 后无元素，插入空块\n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc 删除\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // 前后可以输入空格\n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // 前后空格处理\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // 开始可以输入空格\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // 结尾可以输入空格\n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            return;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML 会插入 wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // 列表需要到最顶层\n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        // 应到引用层，否则 > --- 会解析为 front-matter；列表中有 blockquote 则解析 blockquote；blockquote 中有列表则解析列表\n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // 修改脚注\n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // 如果为列表的话，需要把上下的列表都重绘\n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // 换行时需要处理上一段落\n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n        // 添加脚注\n        vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        // 更新正文中的 tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + marker + \"\\\"]\");\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref 合并及添加\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n// 是否匹配 ⇧⌘[] / ⌘[] / ⌥[] / ⌥⌘[] / ⇧Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"⇧\") === -1 && hotKey.indexOf(\"⌘\") === -1 && hotKey.indexOf(\"⌥\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧Tab\n    if (hotKey === \"⇧Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"⌥\")) {\n        // 是否匹配 ⌥[] / ⌥⌘[]\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧⌘[] / ⌘[]\n    if (hotKey === \"⌘Enter\") {\n        hotKeys = [\"⌘\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"⇧\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    // 选中文本为同一个 nodeElement 内时，需要展开\n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari中光标位置跳动\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // 斜体、粗体、内联代码块中换行\n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 代码块\n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // 数学公式上无元素，按上或左将添加新块\n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // 代码块下无元素或者为代码块/table 元素，添加空块\n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // 代码块语言\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // 删除零宽空格\n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // 删除时清空自动补全语言\n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // 上无元素，按上或左将添加新块\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // 当前块为空且不是最后一个时，需要删除\n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // 光标位于标题前，marker 后\n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    // 不调用 lute 解析\n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // 开始可以输入空格\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584 代码块 marker 删除\n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 数学公式输入删除生成节点\n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // 标题删除\n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        // 删除或空格不解析，否则会 format 回去\n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // 场景：b 前进行删除 [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") // 场景：删除最后一个字符 [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") // 场景：删除最后一个字符 [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") // 场景：删除最后一个字符 [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // 内联数学公式\n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // 修改脚注角标\n        blockElement = vditor.sv.element;\n    }\n    // 添加光标位置\n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        // 点击工具栏会插入 Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // 添加前一个块元素\n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            // 确认 yaml-front 是否为首行\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n        // 添加脚注\n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item.parentElement;\n        }\n        else {\n            firstLinkRefDefElement.lastElementChild.remove();\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstLinkRefDefElement);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item.parentElement;\n        }\n        else {\n            firstFootnoteElement.lastElementChild.remove();\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstFootnoteElement);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    // 回车逐个删除 blockquote marker 标记\n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                // 列表中存在多行 BQ 时，标记回车需跳出列表\n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // 回车清空列表标记符\n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            // 第一个 marker 后 tab 进行缩进\n            if (event.key === \"Tab\") {\n                listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\" + listFirstMarkerElement.textContent.replace(/\\S/g, \" \") + \"</span>\");\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // 回车\n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // 允许段落开始换行\n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    // 删除后光标前有 newline 的处理\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            // 飘号的处理需在 inputEvent 中，否则上下飘号对不齐\n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // 光标在每一行的第一个字符后\n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 每一段第一个字符前\n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            // 场景：末尾无法删除 [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/i18n/index.ts\nvar i18n = __webpack_require__(577);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor, contentElement));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \" + -layoutViewport.getBoundingClientRect().top + \"px)\";\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.preview.element.style.display !== \"block\" || vditor.currentMode === \"sv\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    // 由于 Firefox padding-bottom bug，只能使用 :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar afterRender = function (vditor, contentElement) {\n    setTypewriterPosition(vditor);\n    window.addEventListener(\"resize\", function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\" + previousHTML + text.substr(0, offset);\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\" + text.substr(offset) + nextHTML;\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // 没有被块元素包裹\n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            // 为空按下 tab 且 tab = '    ' 时，range.startContainer 不为 node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox 列表换行产生 div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.innerHTML + \"</p>\";\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox 空换行产生 BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"<wbr></p>\";\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"</p>\";\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox 需要 trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox 光标对不齐 https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        else {\n            blockElement.outerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\" + blockElement.innerHTML + \"</p>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox 触发 compositionend 机制不一致 https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: 退出编辑，仅展示渲染\n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter: 代码块切换到语言 https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 顶层 blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter: 跳出多层 blockquote 嵌套之后 https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter: 跳出多层 blockquote 嵌套之前\n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6 回车解析问题 https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // 删除后变为空\n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // 切换到链接、链接引用、脚注引用弹出的输入框中\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // 删除有子工具栏的块\n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // 对有子工具栏的块上移\n    if (matchHotKey(\"⇧⌘U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 对有子工具栏的块下移\n    if (matchHotKey(\"⇧⌘D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter：软换行，但 table/hr/heading 处理、cell 内换行、block render 换行处理单独写在上面，li & p 使用浏览器默认\n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            // 行内元素软换行需继续 https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // 删除\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // 当前块为空且不是最后一个时，需要删除\n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // 保持行内元素软换行需继续的一致性\n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline code、math、html 行前零宽字符后进行删除\n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                // 不能返回，其前面为代码渲染块时需进行以下处理：修正光标位于 inline math/html 前，按下删除按钮 code 中内容会被删除\n            }\n            // 修正光标位于 inline math/html, html-entity 前，按下删除按钮 code 中内容会被删除, 不能返回，还需要进行后续处理\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // 光标位于内联数学公式前，按下键无作用\n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // 删除有子工具栏的块\n    if (matchHotKey(\"⇧⌘X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length ?\n                typeElement.childNodes.length - 1 : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // 工具栏高亮和禁用\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") || (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") || (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") || (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-comment--focus\").forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling.getAttribute(\"data-cmtids\").split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                    \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                    \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement.querySelector(\"tbody\").insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement.querySelector(\"thead\").insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alignLeft +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML = '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alignCenter +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML = '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alignRight +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML = '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertRowBelow +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertRowAbove +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertColumnRight +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].insertColumnLeft +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang][\"delete-row\"] +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang][\"delete-column\"] +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0).startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].footnoteRef +\n                \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n                    range.selectNodeContents(footnotesRefElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        if (blockRenderElement && blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].language +\n                    \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                language_1.value = codeElement_1.className.indexOf(\"language-\") > -1 ?\n                    codeElement_1.className.split(\"-\")[1].split(\" \")[0] : \"\";\n                language_1.oninput = function () {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\" + language_1.value;\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML = blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" && vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                    vditor.hint.select(event, vditor);\n                };\n                language_1.onkeyup = function (event) {\n                    if (event.isComposing || event.key === \"Enter\" || event.key === \"ArrowUp\" || event.key === \"Escape\"\n                        || event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            if (!blockRenderElement) {\n                vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (itemElement) {\n                    var previousElement = itemElement.previousElementSibling;\n                    previousElement.style.display = \"none\";\n                });\n            }\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n                    range.selectNodeContents(headingElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement);\n        }\n        if (!blockquoteElement && !liElement && !tableElement && !blockRenderElement && !aElement\n            && !linkRefElement && !footnotesRefElement && !headingElement && !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement && blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // 反斜杠特殊处理\n        vditor.wysiwyg.element.querySelectorAll('span[data-type=\"backslash\"] > span').forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top = Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement || (!element.parentElement.isEqualNode(vditor.wysiwyg.element) && element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].up +\n        \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement || (!element.parentElement.isEqualNode(vditor.wysiwyg.element) && element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].down +\n        \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘D\") + \">\");\n    downElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].remove +\n        \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘X\") + \">\");\n    close.innerHTML = '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox 不会打断 link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", i18n/* i18n */.a[vditor.options.lang].title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", i18n/* i18n */.a[vditor.options.lang].title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = previousHTML + \"<\" + tagName + \">\" + lastBeforeHTML + \"</\" + tagName + \">\";\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // 取消\n                insertHTML += \"\" + lastTagName + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\" + lastEndTagName;\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\" + tagName + \">\" + lastAfterHTML + \"</\" + tagName + \">\" + nextHTML;\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\" + tagName + \">\" + lastTagName;\n            lastEndTagName = \"</\" + tagName + \">\" + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome 中韩文结束会出发此事件，导致重复末尾字符 https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent // 点击按钮应忽略输入法 https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // 添加\n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li 中软换行\n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\" + liElement.innerHTML + \"</blockquote>\";\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\" + range.toString() + \"<wbr></code></pre>\";\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\" + header + \"<wbr></th>\";\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\" + header + \"</th>\";\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\" + cell + \"</td>\";\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    // 移除多层嵌套中的 zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \">\" : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \"&gt;\" : \"\";\n        }\n        var tip = menuItem.tip ?\n            menuItem.tip + hotkey : i18n/* i18n */.a[vditor.options.lang][menuItem.name] + hotkey;\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\" + tagName + \" data-type=\\\"\" + menuItem.name + \"\\\">\" + tip + \"</\" + tagName + \">\";\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\" + menuItem.tipPosition;\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV 模式 Placeholder 显示问题\n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        // 初始化不 focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\" + vditor.currentMode + \"\\\"]\").classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable);\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\" + i18n/* i18n */.a[vditor.options.lang].wysiwyg + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘7\") + \"></button>\\n<button data-mode=\\\"ir\\\">\" + i18n/* i18n */.a[vditor.options.lang].instantRendering + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘8\") + \"></button>\\n<button data-mode=\\\"sv\\\">\" + i18n/* i18n */.a[vditor.options.lang].splitView + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘9\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // 选中编辑器中的文字进行拖拽\n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // 编辑器内选中文字拖拽\n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types[0] === \"Files\" || event.dataTransfer.types.includes(\"text/html\")) {\n            // 外部文件拖入编辑器中或者编辑器内选中文字拖拽\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        // 获取 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (typeof vditor.options.height === \"string\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (typeof vditor.options.height === \"number\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        // hint: 上下选择\n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        // 重置 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"⌘X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"⌘Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"⌘Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"⌘Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var html = \"<div data-block='0'>\" +\n        vditor.lute.Md2VditorSVDOM(blockElement.textContent).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    html = \"<div data-block='0'>\" +\n        vditor.lute.SpinVditorSVDOM(html).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // 有内容的子列表/标题，在其 marker 后换行\n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 添加\n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + suffix;\n        }\n        else {\n            html = \"\" + prefix + range.toString() + suffix.replace(\")\", Lute.Caret + \")\");\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563 代码块不需要后面的 ```\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\" + prefix + range.toString() + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\" + prefix + \"\\n\" + Lute.Caret;\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\" + i18n/* i18n */.a[lang].nameEmpty + \"</li>\";\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\" + file.name + \" \" + i18n/* i18n */.a[lang].over + \" \" + vditor.options.upload.max / 1024 / 1024 + \"M</li>\";\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\" + file.name + \" \" + i18n/* i18n */.a[lang].fileTypeError + \"</li>\";\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\" + filename + \" \" + i18n/* i18n */.a[lang].uploading + \"</li>\";\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\" + errorTip + uploadingStr + \"</ul>\");\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\" + response.msg;\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\" + errorTip + \"</li>\";\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\" + filename + \" \" + i18n/* i18n */.a[vditor.options.lang].uploadError + \"</li>\";\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"&gt;&lt;/audio&gt;</code></pre>\";\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"></audio>\\n\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\" + filename + \"\\\" src=\\\"\" + path + \"\\\">\";\n            }\n            else {\n                succFileText += \"![\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\" + path + \"\\\">\" + filename + \"</a>\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (vditor.options.upload.handler) {\n                    isValidate = vditor.options.upload.handler(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 1:\n                fileList = _b.sent();\n                _b.label = 2;\n            case 2:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            // 链接结尾回车不应该复制到下一行 https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // 保存光标\n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // 在行首进行删除，后面的元素会带有样式，需清除\n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // 移除空评论\n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  在有评论的行首换行后，该行的前一段会带有评论标识\n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // 修改链接引用\n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // 列表需要到最顶层\n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li 中有 blockquote 就只渲染 blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // 修改脚注\n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // 如果为列表的话，需要把上下的列表都重绘\n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            // 添加链接引用\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // 添加脚注\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        // 合并多个 em， strong，s。以防止多个相同元素在一起时不满足 commonmark 规范，出现标记符\n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                // 更新正文中的 tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + footnoteItemElement.getAttribute(\"data-marker\") + \"\\\"]\");\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // 脚注合并后添加的末尾\n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // 设置光标\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 软键盘无法删除空块\nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        // 移动端的标点符号都显示为 299，因此需限定为空删除的条件\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 代码块后输入中文\nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 光标在内联数学公式中无法向下移动\nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// 光标设置到前一个表格中\nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // 取消\n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\" + itemElement.parentElement.children[i].innerHTML.trimLeft() + \"</p>\";\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // 添加\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ol>\");\n                blockElement.remove();\n            }\n        }\n        else {\n            // 切换\n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\" + (item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                }\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\" + marker.slice(-1);\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\" + item.getAttribute(\"data-node-id\") + \"\\\" data-marker=\\\"\" + marker + \"\\\">\" + item.innerHTML + \"</li>\";\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\" + liParentElement.tagName + \" data-block=\\\"0\\\">\" + liHTML_1 + \"</\" + liParentElement.tagName + \">\");\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                // 满足 heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // 代码块\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li 中有多个 P 时，在第一个 P 中换行会在下方生成新的 li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li 结尾需 \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // 光标位于点和第一个字符中间时，无法删除 li 元素\n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\");\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\";\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // 空列表删除后与上一级段落对齐\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // 光标位于第一/零字符时，tab 用于列表的缩进\n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // 有序/无序列表\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // 任务列表\n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab 处理: block code render, table, 列表第一个字符中的 tab 处理单独写在上面\nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table 自动完成\n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr 渲染\n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            // 软换行后 hr 前有内容\n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\" + innerHTMLList.join(\"\\n\") + \"</p>\";\n            }\n            pElement.insertAdjacentHTML(\"afterend\", pInnerHTML + \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\");\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading 渲染\n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 软换行会被切割 https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + pElement.innerHTML);\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\" + rowHTML + \"</tr></tbody>\");\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </th>\";\n        }\n        else {\n            rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\" + rowHTML + \"</tr></thead>\");\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        // 换行或软换行：在 cell 中添加 br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab：光标移向下一个 cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab 光标移动到前一个 cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace：光标移动到前一个 cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 上方新添加一行\n        if (matchHotKey(\"⇧⌘F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 下方新添加一行 https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"⌘=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 左方新添加一列\n        if (matchHotKey(\"⇧⌘G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // 后方新添加一列\n        if (matchHotKey(\"⇧⌘=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前行\n        if (matchHotKey(\"⌘-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前列\n        if (matchHotKey(\"⇧⌘-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 剧左\n        if (matchHotKey(\"⇧⌘L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧中\n        if (matchHotKey(\"⇧⌘C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧右\n        if (matchHotKey(\"⇧⌘R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    // 行级代码块中 command + a，近对当前代码块进行全选\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"⌘A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and 选中文字\n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: 光标位于第零个字符，仅删除代码块标签\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) // 空代码块，光标在 \\n 后\n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\" + codeRenderElement.firstElementChild.innerHTML + \"</p>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 换行\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: 光标位于引用中的第零个字符，仅删除引用标签\n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: 空行回车应逐层跳出\n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                // 空 P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // 软换行\n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                // 需添加零宽字符，否则的话无法记录 undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\"⇧⌘;\", event)) {\n            // 插入 blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-task\");\n    if (taskItemElement) {\n        if (matchHotKey(\"⇧⌘J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: 在选择框前进行删除\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + (taskItemElement.innerHTML.trim() || \"\\n\") + \"</p>\");\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // 当前任务列表无文字\n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // 为子元素时，需进行反向缩进\n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // 仅有一级任务列表\n                    if (taskItemElement.nextElementSibling) {\n                        // 任务列表下方还有元素，需要使用用段落隔断\n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\" + taskItemElement.parentElement.getAttribute(\"data-marker\") + \"\\\"\";\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\" + parentTagName + \" data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\">\" + beforeHTML_1 + \"</\" + parentTagName + \">\";\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = beforeHTML_1 + \"<p data-block=\\\"0\\\"><wbr>\\n</p><\" + parentTagName + \"\\n data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\"\" + startAttribute + \">\" + afterHTML_2 + \"</\" + parentTagName + \">\";\n                    }\n                    else {\n                        // 任务列表下方无任务列表元素\n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            // 任务列表仅有一项时，使用 p 元素替换\n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // 任务列表有多项时，当前任务列表位于最后一项，移除该任务列表\n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                // 光标位于 input 之前\n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // 当前任务列表有文字，光标后的文字需添加到新任务列表中\n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\" + taskItemElement.getAttribute(\"data-marker\") + \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\");\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        // 光标位于 hr 前，hr 前有内容\n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table 后删除 https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                // 光标位于 hr 后进行删除\n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types[0] === \"Files\") {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\" + original_1 + \"\\\"]\");\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                };\n                // 浏览器地址栏拷贝处理\n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a>\" ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a><!--EndFragment-->\") {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // 粘贴在代码位置\n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\" + vditor.currentMode + \"__preview\")) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 6];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 6];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 6];\n            case 3:\n                if (!(files.length > 0 && vditor.options.upload.url)) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 6;\n            case 6:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // 代码块语言提示\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // 添加\n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                html = \"\" + prefix + range.toString() + suffix.replace(\")\", \"<wbr>)\");\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                if (commandName === \"code\" || commandName === \"table\") {\n                    html = \"\" + prefix + range.toString() + \"<wbr>\" + suffix;\n                }\n                else {\n                    html = \"\" + prefix + range.toString() + suffix + \"<wbr>\";\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // 代码提示\n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3 &&\n                range.startContainer.firstElementChild.classList.contains(\"vditor-input\")) {\n                var inputElement = range.startContainer.firstElementChild;\n                inputElement.value = value.trimRight();\n                range.selectNodeContents(inputElement);\n                range.collapse(false);\n                inputElement.dispatchEvent(new CustomEvent(\"input\"));\n                _this.recentLanguage = value.trimRight();\n                return;\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\" + emojiHint_1[keyName] + \"\\\" title=\\\":\" + keyName + \":\\\"/> :\" + keyName + \":\",\n                                value: \":\" + keyName + \":\",\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\" + emojiHint_1[keyName] + \"</span>\" + keyName,\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () {\n                            _this.genHTML(item.hint(key), key, vditor);\n                        }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button data-value=\\\"\" + encodeURIComponent(hintData.value) + \" \\\"\\n\" + (i === 0 ? \"class='vditor-hint--current'\" : \"\") + \"> \" + html + \"</button>\";\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = y + (lineHeight || 22) + \"px\";\n        this.element.style.left = x + \"px\";\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint 展现在上部\n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = y - this.element.offsetHeight + \"px\";\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\";\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // 点击后光标落于预览区\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // 行内数学公式\n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // 点击图片光标选中图片地址\n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // 打开链接\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681 当点击选中区域时 eventTarget 与 range 不一致，需延迟等待 range 发生变化\n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                // 数学公式前是空块，空块前是 table，在空块前删除，数学公式会多一个 br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR 删除到节点需展开\n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // 行内数学公式/html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\" + outlineLabel + \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\";\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.element.lastElementChild, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show) {\n        var _a;\n        if (show === void 0) { show = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                vditor[vditor.currentMode].element.focus();\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        var previewElement = document.createElement(\"div\");\n        previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            previewElement.classList.add(vditor.options.classes.preview);\n        }\n        previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement);\n            event.preventDefault();\n        });\n        previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        });\n        var actions = vditor.options.preview.actions;\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\" + action.key + \"\\\" class=\\\"\" + action.className + \"\\\"\" + (action.tooltip ? \" aria-label=\\\"\" + action.tooltip + \"\\\"\" : \"\") + \"\\\">\" + action.text + \"</button>\");\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        if (actions.length === 0) {\n            actionElement.style.display = \"none\";\n        }\n        this.element.appendChild(actionElement);\n        this.element.appendChild(previewElement);\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.element.lastElementChild.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                previewElement.style.width = \"780px\";\n            }\n            else {\n                previewElement.style.width = \"360px\";\n            }\n            if (previewElement.scrollWidth > previewElement.parentElement.clientWidth) {\n                previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.element.lastElementChild.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.element.lastElementChild.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.element.lastElementChild.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.element.lastElementChild.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.element.lastElementChild.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.element.lastElementChild, vditor.options.lang);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mediaRender/* mediaRender */.Y)(vditor.preview.element.lastElementChild);\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.element.lastElementChild, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\" + item.getAttribute(\"data-math\") + \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\";\n            });\n        }\n        // 防止背景色被粘贴到公众号中\n        copyElement.style.backgroundColor = \"#fff\";\n        // 代码背景\n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        this.element.lastElementChild.remove();\n        vditor.tip.show(\"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\" + (type === \"zhihu\" ? \"知乎\" : \"微信公众号平台\") + \"\\u8FDB\\u884C\\u7C98\\u8D34\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\" + vditor.options.resize.position;\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\";\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n            return;\n        }\n        this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"</div>\";\n        setTimeout(function () {\n            _this.hide();\n        }, time);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\" + theme + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\" + key + \"\\\">\" + vditor.options.preview.theme.list[key] + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = length + \"/\" + vditor.options.counter.max;\n        }\n        else {\n            this.element.innerHTML = \"\" + length;\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\"><img\\ndata-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\" + emojiValue + \"\\\"/></button>\";\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\" + emojiValue + \" \\\"\\n data-key=\\\"\" + key + \"\\\"><span class=\\\"vditor-emojis__icon\\\">\" + emojiValue + \"</span></button>\";\n            }\n        });\n        var tailHTML = \"<div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\" + (vditor.options.hint.emojiTail || \"\") + \"</span>\\n</div>\";\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \" + (vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80) + \"px\\\">\" + commonEmojiHTML + \"</div>\" + tailHTML;\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.children[0], menuItem.level);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Emoji.prototype._bindEvent = function (vditor, panelElement) {\n        panelElement.querySelectorAll(\".vditor-emojis button\").forEach(function (element) {\n            element.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                var value = element.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                panelElement.style.display = \"none\";\n                execAfterRender(vditor);\n            });\n            element.addEventListener(\"mouseover\", function (event) {\n                if (event.target.tagName === \"BUTTON\") {\n                    panelElement.querySelector(\".vditor-emojis__tip\").innerHTML =\n                        event.target.getAttribute(\"data-key\");\n                }\n            });\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].generate, 3800);\n    var iframe = document.querySelector(\"iframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    markdown: {\\n      theme: \\\"\" + vditor.options.preview.theme + \"\\\"\\n    },\\n    hljs: {\\n      style: \\\"\" + vditor.options.preview.hljs.style + \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\");\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\" + content + \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\" + vditor.options.preview.theme.current + \"', '\" + vditor.options.preview.theme.path + \"');\\n    Vditor.codeRender(previewElement, '\" + vditor.options.lang + \"');\\n    Vditor.highlightRender(\" + JSON.stringify(vditor.options.preview.hljs) + \", previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\" + vditor.options.cdn + \"',\\n        math: \" + JSON.stringify(vditor.options.preview.math) + \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.flowchartRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.graphvizRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.chartRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.mindmapRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.abcRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mediaRender(previewElement);\\n</script></body></html>\";\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">Heading 1 \" + (0,compatibility/* updateHotkeyTip */.ns)(\"&lt;⌥⌘1>\") + \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">Heading 2 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘2\") + \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">Heading 3 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘3\") + \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">Heading 4 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘4\") + \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">Heading 5 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘5\") + \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">Heading 6 &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘6\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript\\u3001Vue\\u3001React\\u3001Angular\\uFF0C\\u63D0\\u4F9B<a target=\\\"_blank\\\" href=\\\"https://b3log.org/siyuan\\\">\\u684C\\u9762\\u7248</a>\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\" + constants/* VDITOR_VERSION */.H + \" / Lute v\" + Lute.Version + \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\", 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(i18n/* i18n */.a[vditor.options.lang][\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\" + (new Date()).getTime() + \".wav\", { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(i18n/* i18n */.a[vditor.options.lang].recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\" + vditor.options.upload.accept + \"\\\"\";\n        }\n        _this.element.children[0].innerHTML = \"\" + (menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>') + inputHTML + \">\";\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(694);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo 操作后，需要关闭 hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox 第一次删除无效\n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown 在 input 之后，不需要重复记录历史\n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            // 当还不没有存入 undo 栈时，按下 ctrl 后会覆盖 lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        // 不能添加 setSelectionFocus(cloneRange); 否则 windows chrome 首次输入会烂\n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts 已经 debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari 第一次输入没有光标，需手动定位到结尾\n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // 移除数学公式、echart 渲染 https://github.com/siyuan-note/siyuan/issues/537\n        var cloneElement = vditor.ir.element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='1']\")\n            .forEach(function (item) {\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = vditor[vditor.currentMode].element.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            // 使用 item.outerHTML = \"\" 会产生 https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"👍\",\n                    \"-1\": \"👎\",\n                    \"confused\": \"😕\",\n                    \"eyes\": \"👀️\",\n                    \"heart\": \"❤️\",\n                    \"rocket\": \"🚀️\",\n                    \"smile\": \"😄\",\n                    \"tada\": \"🎉️\",\n                },\n                emojiPath: constants/* Constants.CDN */.g.CDN + \"/dist/images/emoji\",\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                }\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_c = this.options.hint) === null || _c === void 0 ? void 0 : _c.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [{\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"⌘D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            }, {\n                hotkey: \"⌘K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                hotkey: \"⌘L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⌘J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⇧⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⇧⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                hotkey: \"⌘;\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⇧⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⌘U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⌘G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⇧⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⇧⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            }, {\n                hotkey: \"⌘M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            }, {\n                name: \"|\",\n            }, {\n                hotkey: \"⌘Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            }, {\n                hotkey: \"⌘Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            }, {\n                name: \"|\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            }, {\n                hotkey: \"⌘'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            }, {\n                hotkey: \"⌘P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            }, {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            }, {\n                name: \"br\",\n            }];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" && defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" && defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\" + i18n/* i18n */.a[vditor.options.lang].comment + \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\";\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\" + id + \"\\\"]\").offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\" + position.left + \"px;display:block;top:\" + Math.max(-8, position.top - 21) + \"px\");\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\" + aTitle + \"\\\"\";\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\" + range.toString() + \"](\" + aElement.getAttribute(\"href\") + aTitle + \")\");\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        window.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // 中文处理\n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // 没有被块元素包裹\n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // 前后空格处理\n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // 开始可以输入空格\n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // 结尾可以输入空格\n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                return;\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml 图片渲染不进行提示\n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // 打开链接\n            if (event.target.tagName === \"A\") {\n                window.open(event.target.getAttribute(\"href\"));\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // 点击后光标落于预览区，需展开代码块\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            // 除 md 处理、cell 内换行、table 添加新行/列、代码块语言切换、block render 换行、跳出/逐层跳出 blockquote、h6 换行、\n            // 任务列表换行、软换行外需在换行时调整文档位置\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // 没有被块元素包裹\n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // 上下左右，删除遇到块预览的处理\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table 前删除遇到代码块\n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // 下一节点依旧为代码渲染块\n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // 跳过渲染块，光标移动到下一个节点\n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id 要挂载 Vditor 的元素或者元素 ID。\n     * @param options Vditor 参数\n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\" + id,\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\" + id };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\" + id;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n            throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n        }\n        _this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(i18n/* i18n */.a[mergedOptions.lang].outline),\n            tip: new Tip(),\n        };\n        _this.vditor.sv = new Editor(_this.vditor);\n        _this.vditor.undo = new undo_Undo();\n        _this.vditor.wysiwyg = new WYSIWYG(_this.vditor);\n        _this.vditor.ir = new IR(_this.vditor);\n        _this.vditor.toolbar = new Toolbar(_this.vditor);\n        if (mergedOptions.resize.enable) {\n            _this.vditor.resize = new Resize(_this.vditor);\n        }\n        if (_this.vditor.toolbar.elements.devtools) {\n            _this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            _this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(options._lutePath || mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\")\n            .then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                codeBlockPreview: _this.vditor.options.preview.markdown.codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown.mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown.paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                // 防止初始化 2 个编辑器时加载 2 次\n                (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n            }\n        });\n        return _this;\n    }\n    /** 设置主题 */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /** 获取 Markdown 内容 */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /** 获取编辑器当前编辑模式 */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /** 聚焦到编辑器 */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /** 让编辑器失焦 */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /** 禁用编辑器 */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\",\n            \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /** 解除编辑器禁用 */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\",\n            \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /** 返回选中的字符串 */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /** 设置预览区域内容 */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /** 获取焦点位置 */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /** 上传是否还在进行中 */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /** 清除缓存 */\n    Vditor.prototype.clearCache = function () {\n        localStorage.removeItem(this.vditor.options.cache.id);\n    };\n    /** 禁用缓存 */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /** 启用缓存 */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n            return;\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML 转 md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /** 获取 HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** 消息提示。time 为 0 将一直显示 */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /** 设置预览模式 */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /** 删除选中内容 */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /** 更新选中内容 */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /** 在焦点处插入内容，并默认进行 Markdown 渲染 */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /** 设置编辑器内容 */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = this.vditor.lute.SpinVditorSVDOM(markdown);\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /** 清空 undo & redo 栈 */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /** 销毁编辑器 */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        document.getElementById(\"vditorIconScript\").remove();\n        this.clearCache();\n    };\n    /** 获取评论 ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /** 高亮评论 */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /** 取消评论高亮 */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /** 删除评论 */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    return Vditor;\n}(method.default));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__.default;\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"sourceRoot":""}